<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Live Traffic Dashboard - SVG</title>
<style>
  body { font-family: Arial, sans-serif; text-align:center; background:#f0f0f0; }
  svg { max-width:700px; width:100%; border:3px solid #ff7f00; margin:20px auto; display:block; }
  button { padding:10px 20px; margin:10px; font-size:16px; cursor:pointer; }
</style>
</head>
<body>

<h1>Live Traffic Dashboard (SVG Method)</h1>

<!-- SVG map -->
<svg id="traffic-svg" viewBox="0 0 700 450">
  <!-- UL1 Road -->
  <polygon id="UL1" points="75,342 253,126 289,155 137,341" fill="green" opacity="0.5"/>
  
  <!-- UL3 Road -->
  <polygon id="UL3" points="358,128 314,160 440,341 532,340" fill="green" opacity="0.5"/>
  
  <!-- UL2 Intersection -->
  <ellipse id="UL2" cx="420" cy="230" rx="60" ry="40" fill="green" opacity="0.5"/>
</svg>

<!-- Buttons -->
<div>
  <button onclick="updateTraffic()">Update Traffic</button>
  <button onclick="alert('Earthquake Predictions Coming Soon')">Earthquake Predictions</button>
</div>

<script>
// Color mapping
const colorMap = {
  "Free": "green",
  "In use": "orange",
  "Occupied": "red"
};

// Update function
async function updateTraffic() {
  try {
    const response = await fetch("trafficPredictor.json");
    const data = await response.json();
    const latest = data[data.length - 1];

    // Update SVG colors
    document.getElementById("UL1").setAttribute("fill", colorMap[latest.UL1] || "black");
    document.getElementById("UL2").setAttribute("fill", colorMap[latest.UL2] || "black");
    document.getElementById("UL3").setAttribute("fill", colorMap[latest.UL3] || "black");

  } catch (err) {
    console.error("Failed to load traffic JSON:", err);
  }
}

// Auto-update every 10 seconds
updateTraffic();
setInterval(updateTraffic, 10000);
</script>

</body>
</html>
